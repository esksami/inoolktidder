{% extends "layout.html" %}

{% block body %}
<section id="edit-post" class="bg-white border rounded p-3">
  <div class="p-2 text-center color-main" style="text-shadow: none;">
    <span class="material-icons md-36">assignment</span>
    <h1>Edit post</h1>
  </div>
  <form method="POST" action="{{ url_for('posts_edit', post_id=post.id) }}">
    <div class="md-form my-2 d-flex flex-row">
      
      {{ form.title.label(class_="sr-only") }}
      <div class="my-auto" style="height:24px">
        <span class="material-icons text-secondary mr-2">
          short_text
        </span>
      </div>
      {{ form.title(class_="form-control", autofocus="", placeholder="Title", value=post.title, style="box-shadow: none;border-top: none; border-left: none; border-right: none; border-radius: 0;") }}
    </div>
    <div class="text-info">
      <ul>
        {% for error in form.title.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="my-2 d-flex flex-row">
      {{ form.content.label(class_="sr-only") }}
      <div class="mb-auto" style="height:24px">
        <span class="material-icons text-secondary mr-2">
          notes
        </span>
      </div>
      <!-- https://stackoverflow.com/questions/5117479/wtforms-how-to-prepopulate-a-textarea-field
      I have no idea why this works. -->
      {% set f = form.content.process_data(post.content) %}
      {{ form.content(rows=12, class_="form-control", placeholder="Content", style="box-shadow: none;") }}
    </div>
    <div class="text-info">
      <ul>
        {% for error in form.content.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
    <div>
      <div class="d-flex flex-row">
        <button class="ml-2 btn btn-success btn-block btn-rounded ml-auto" style="width:100px" type="submit">
          Confirm
        </button>
        <a href="{{ url_for('posts_details', post_id=post.id) }}" class="invisible" style="text-decoration: none">
          <button type="button" class="ml-2 visible btn btn-secondary btn-block btn-rounded" style="width:100px" type="submit">
            Cancel
          </button>
        </a>
      </div>
    </div>
  </form>
</section>
{% endblock %}